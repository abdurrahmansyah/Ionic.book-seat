<ion-content>
  <div class="flexContainer">
    <div style="padding: 50px 30px 0px 30px;">
      <ion-text style="font-size: 30px; font-weight: 700;" color="rid-goodgreen-two">Book Your Seat</ion-text>
    </div>
    <div style="position: relative;" class="ion-padding">
      <img *ngIf="isLoaded" class="denah-utama" src={{imageDenah}}>
      <ion-skeleton-text *ngIf="!isLoaded" [animated]="true" class="skeleton-denah"></ion-skeleton-text>
      <div class="denah-addon">
        <img class="ion-padding" *ngIf="isLoaded && imageDenahMap" src={{imageDenahMap}}>
      </div>
      <div *ngFor="let x of denahBookedSeat" class="denah-addon">
        <img class="ion-padding" *ngIf="isLoaded" src='{{x}}'>
      </div>
    </div>

    <div style="padding: 0px 10px 10px 10px;">
      <ion-segment (ionChange)="SegmentChanged($event)" [(ngModel)]="segment" name="segment">
        <ion-segment-button value="seats">
          <ion-label>Seats</ion-label>
        </ion-segment-button>
        <ion-segment-button value="users">
          <ion-label>Users</ion-label>
        </ion-segment-button>
      </ion-segment>
    </div>

    <div *ngIf="segment === 'seats'" class="scrollYnew ion-padding">
      <div *ngIf="!isLoaded" class="ion-padding">
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
      </div>
      <div *ngIf="isLoaded">
        <div *ngFor="let x of seatDataList">
          <ion-accordion-group mode="md" expand="inset">
            <ion-accordion value="x.code">
              <ion-item *ngIf="!x.bookedSeatData" slot="header" color="rid-goodgreen-two">{{x.name}}</ion-item>
              <ion-item *ngIf="x.bookedSeatData" slot="header" color="rid-goodred-two">{{x.name}}</ion-item>
              <ion-item *ngIf="x.bookedSeatData" slot="content" class="item">
                <ion-label>
                  {{x.bookedSeatData.employee_id[1]}}
                  <p>{{x.bookedSeatData.book_datetime}}</p>
                </ion-label>
              </ion-item>
            </ion-accordion>
          </ion-accordion-group>
        </div>
      </div>
      <hr *ngIf="bookedSeatData" style="height: 60px;">
    </div>

    <div *ngIf="segment === 'users'" class="scrollYnew ion-padding">
      <div *ngIf="!isLoaded" class="ion-padding">
        <ion-skeleton-text [animated]="true" class="skeleton-search"></ion-skeleton-text>
        <br>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
        <ion-skeleton-text [animated]="true" class="skeleton-item"></ion-skeleton-text>
      </div>

      <div *ngIf="isLoaded">
        <ion-searchbar mode="ios" show-cancel-button="focus" placeholder="Search" style="padding: 0px 5%;"
          (ionInput)="searchInput($event)" (ionFocus)="searchFocus($event)" (ionCancel)="searchCancel($event)"
          (ionChange)="searchChange($event)" cancel-button-text="Batal" cancel-button-icon="trash"
          placeholder="Cari"></ion-searchbar>

        <div *ngIf="isSearch">
          <div *ngFor="let x of search">
            <ion-accordion-group mode="md" expand="inset">
              <ion-accordion value="asesmen">
                <ion-item *ngIf="!x.bookedSeatData" slot="header" color="rid-goodgreen-two">{{x.name}}</ion-item>
                <ion-item *ngIf="x.bookedSeatData" slot="header" color="rid-goodred-two">{{x.name}}</ion-item>
                <ion-item *ngIf="x.bookedSeatData" slot="content" class="item">
                  <ion-label>
                    {{x.bookedSeatData.code_id[1]}}
                    <p>{{x.bookedSeatData.book_datetime}}</p>
                  </ion-label>
                </ion-item>
              </ion-accordion>
            </ion-accordion-group>
          </div>
        </div>

        <div *ngIf="!isSearch">
          <div *ngFor="let x of userGroupDataList">
            <ion-accordion-group mode="md" expand="inset">
              <ion-accordion value="asesmen">
                <ion-item *ngIf="!x.bookedSeatData" slot="header" color="rid-goodgreen-two">{{x.name}}</ion-item>
                <ion-item *ngIf="x.bookedSeatData" slot="header" color="rid-goodred-two">{{x.name}}</ion-item>
                <ion-item *ngIf="x.bookedSeatData" slot="content" class="item">
                  <ion-label>
                    {{x.bookedSeatData.code_id[1]}}
                    <p>{{x.bookedSeatData.book_datetime}}</p>
                  </ion-label>
                </ion-item>
              </ion-accordion>
            </ion-accordion-group>
          </div>
        </div>
      </div>
      <hr *ngIf="bookedSeatData" style="height: 60px;">
    </div>
  </div>

  <ion-fab *ngIf="!bookedSeatData" vertical="bottom" horizontal="end">
    <ion-fab-button (click)="ScanAndBook()" color="secondary">
      <ion-icon name="scan"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <div *ngIf="bookedSeatData" class="ion-text-center" style="position: absolute; bottom: 0px; width: 100%;">
    <div class="ion-margin">
      <ion-item color="secondary" lines="none" button (click)="ScanOnlyOrWithdraw()">
        <ion-label>
          <strong>{{bookedSeatData.employee_id[1]}} - {{bookedSeatData.code_id[1]}}</strong>
          <p>{{bookedSeatData.book_datetime}}</p>
        </ion-label>
        <ion-icon name="scan" slot="end"></ion-icon>
      </ion-item>
    </div>

    <!-- <div class="ion-text-center ion-margin">
      <ion-text>{{bookedSeatData.employee_id[1]}}</ion-text>
    </div> -->
    <!-- <div class="ion-text-center"  style="border-radius: 20px; background-color: blue; width: 90%;" class="ion-padding ">
      <ion-text>{{bookedSeatData.employee_id[1]}}</ion-text>
    </div> -->
  </div>
</ion-content>